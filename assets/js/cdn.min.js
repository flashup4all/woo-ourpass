function Ourpass() { this.isMobileDevice = /Mobi/i.test(window.navigator.userAgent), this.dStyle = { ourpassLoaderWrapper: `display: flex;align-items: center;justify-content: center;`, ourpassLoaderImg: `height: 80px;width: 80px;animation: loader 1s 1s infinite;display: block;`, ourpassParentModal: `position: fixed;z-index: 99999;top: 0;bottom: 0;left: 0;right: 0;display: flex;justify-content: center;align-items: center;background-color: rgba(0,0,0,0.85);`, ourPassContentModalDesktop: `position: relative;background-color: rgb(254, 254, 254);margin: auto;width: calc(100% - 50px);height: 80%;display: none;justify-content: center;align-items: center;max-width: 740px;border-radius: 10px;`, ourPassContentModalMobile: `position: relative;background-color: rgb(254, 254, 254);margin: auto;padding: 0;border-radius: 5px;width: 100%;height: 100%;display: none;justify-content: center;align-items: center;`, ourpassIframe: `display: none;border: none;height: 100%;width: 100%;z-index: 99999;`, ourpassCloseButton: `color: white;position: absolute;right: -16px;font-size: 25px;font-weight: bold;cursor: pointer;top: -10px;`, ourpassCloseButtonFocus: `color: #000;text-decoration: none;cursor: pointer;` }, this.environments = { sandbox: { baseUrl: "https://merchant-sandbox.ourpass.co" }, production: { baseUrl: "https://merchant.ourpass.co" } }, this.config = {} } Ourpass.prototype.handleIframeLoaded = function () { this.removeEventListener("load", this.handleIframeLoaded, !0), document.getElementById("ourpassLoaderWrapper").style.display = "none", document.getElementById("dFrame").style.display = "block", document.getElementById("ourPassContentModal").style.display = "block" }, Ourpass.prototype.handleAnimation = function () { const b = document.getElementById("ourpassLoaderImg"); b || (this.createAnElement("ourpassParentModal", "div", ["ourpassLoaderWrapper"], this.dStyle.ourpassLoaderWrapper), this.createAnElement("ourpassLoaderWrapper", "img", ["ourpassLoaderImg"], this.dStyle.ourpassLoaderImg), document.getElementById("ourpassLoaderImg").setAttribute("src", "https://www.ourpass.co/favicon.ico")), document.getElementById("ourpassLoaderImg").style.display = "block", document.getElementById("ourpassLoaderImg").animate([{ transform: "scale(0.7)" }, { transform: "scale(0.8)" }, { transform: "scale(0.7)" }], { duration: 1e3, iterations: 1 / 0 }) }, Ourpass.prototype.generateIframeSrc = function () { const c = this.clientInfo.items ? JSON.stringify(this.clientInfo.items) : "", a = `${this.config.baseUrl}/checkout/?src=${this.clientInfo.src}&items=${c}&amount=${this.clientInfo.amount}&url=${this.clientInfo.url}&name=${this.clientInfo.name}&email=${this.clientInfo.email}&qty=${this.clientInfo.qty}&description=${this.clientInfo.description}&api_key=${this.clientInfo.api_key}&reference=${this.clientInfo.reference}`; return a }, Ourpass.prototype.g = function () { this.removeElement("ourpassParentModal"), this.OncloseData() }, Ourpass.prototype.closeOnModal = function () { event.target == document.getElementById("ourpassParentModal") && this.g() }, Ourpass.prototype.createAnElement = function (h, a, b, c, d = null) { var e = document.createElement(a); if (e.style.cssText = c, d && (e.innerHTML = d), e.setAttribute("id", b[0]), 1 < b.length && e.setAttribute(`${b[1][0]}`, `${b[1][1]}`), h instanceof HTMLElement) h.appendChild(e); else if ("pass" == h) { var f = document.getElementById("button").parentNode; f.appendChild(e) } else document.getElementById(h).appendChild(e); return e }, Ourpass.prototype.removeElement = function (b) { b instanceof HTMLElement || (b = document.getElementById(b)), b && b.parentNode.removeChild(b) }, Ourpass.prototype.openIframe = function (f) { let a = document.getElementById("ourpassParentModal"); switch (!a || a.remove(), this.clientInfo = f, f.env) { case "sandbox": this.config = this.environments.sandbox; break; default: this.config = this.environments.production; }a = this.createAnElement(document.getElementsByTagName("body")[0], "div", ["ourpassParentModal"], this.dStyle.ourpassParentModal); const g = this.createAnElement("ourpassParentModal", "div", ["ourPassContentModal"]), c = this.createAnElement("ourPassContentModal", "span", ["ourpassCloseButton", ["onclick", "g()"]], this.dStyle.ourpassCloseButton, "&times;"); this.handleAnimation(), this.isMobileDevice ? (g.style.cssText = this.dStyle.ourPassContentModalMobile, c.style.display = "none") : (this.dStyle.ourpassIframe = `${this.dStyle.ourpassIframe}border-radius: 10px;`, g.style.cssText = this.dStyle.ourPassContentModalDesktop); var d = this.createAnElement("ourPassContentModal", "iframe", ["dFrame", ["src", this.generateIframeSrc()]], this.dStyle.ourpassIframe); d.addEventListener("load", this.handleIframeLoaded, !0), window.addEventListener("message", b => { this.config.baseUrl === b.origin && ("false pass" == b.data && (this.removeElement(a), this.clientInfo.onclose()), "false pass1" == b.data && (this.removeElement(a), this.clientInfo.onSuccess(f))) }) }, window.OurpassCheckout = new Ourpass;