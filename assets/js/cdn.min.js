function Ourpass() { this.isMobileDevice = /Mobi/i.test(window.navigator.userAgent), this.dStyle = { ourpassLoaderWrapper: `display: flex;align-items: center;justify-content: center;`, ourpassLoaderImg: `height: 80px;width: 80px;animation: loader 1s 1s infinite;display: block;`, ourpassParentModal: `position: fixed;z-index: 99999;top: 0;bottom: 0;left: 0;right: 0;display: flex;justify-content: center;align-items: center;background-color: rgba(0,0,0,0.85);`, ourPassContentModalDesktop: `position: relative;background-color: rgb(254, 254, 254);margin: auto;width: calc(100% - 50px);height: 80%;display: none;justify-content: center;align-items: center;max-width: 740px;border-radius: 10px;`, ourPassContentModalMobile: `position: relative;background-color: rgb(254, 254, 254);margin: auto;padding: 0;border-radius: 5px;width: 100%;height: 100%;display: none;justify-content: center;align-items: center;`, ourpassIframe: `display: none;border: none;height: 100%;width: 100%;z-index: 99999;`, ourpassCloseButton: `color: white;position: absolute;right: -16px;font-size: 25px;font-weight: bold;cursor: pointer;top: -10px;`, ourpassCloseButtonFocus: `color: #000;text-decoration: none;cursor: pointer;` }, this.environments = { sandbox: { baseUrl: "https://merchant-sandbox.ourpass.co" }, production: { baseUrl: "https://merchant.ourpass.co" } }, this.config = {} } Ourpass.prototype.handleIframeLoaded = function () { this.removeEventListener("load", this.handleIframeLoaded, !0), document.getElementById("ourpassLoaderWrapper").style.display = "none", document.getElementById("dFrame").style.display = "block", document.getElementById("ourPassContentModal").style.display = "block" }, Ourpass.prototype.handleAnimation = function () { const a = document.getElementById("ourpassLoaderImg"); a || (this.createAnElement("ourpassParentModal", "div", ["ourpassLoaderWrapper"], this.dStyle.ourpassLoaderWrapper), this.createAnElement("ourpassLoaderWrapper", "img", ["ourpassLoaderImg"], this.dStyle.ourpassLoaderImg), document.getElementById("ourpassLoaderImg").setAttribute("src", "https://www.ourpass.co/favicon.ico")), document.getElementById("ourpassLoaderImg").style.display = "block", document.getElementById("ourpassLoaderImg").animate([{ transform: "scale(0.7)" }, { transform: "scale(0.8)" }, { transform: "scale(0.7)" }], { duration: 1e3, iterations: 1 / 0 }) }, Ourpass.prototype.generateIframeSrc = function () { const a = this.clientInfo.items ? JSON.stringify(this.clientInfo.items) : "", b = `${this.config.baseUrl}/checkout/?src=${this.clientInfo.src}&items=${a}&amount=${this.clientInfo.amount}&url=${this.clientInfo.url}&name=${this.clientInfo.name}&email=${this.clientInfo.email}&qty=${this.clientInfo.qty}&description=${this.clientInfo.description}&api_key=${this.clientInfo.api_key}&reference=${this.clientInfo.reference}`; return b }, Ourpass.prototype.g = function () { this.removeElement("ourpassParentModal"), this.clientInfo.onClose() }, Ourpass.prototype.closeOnModal = function () { event.target == document.getElementById("ourpassParentModal") && this.g() }, Ourpass.prototype.createAnElement = function (a, b, c, d, e = null) { var f = document.createElement(b); if (f.style.cssText = d, e && (f.innerHTML = e), f.setAttribute("id", c[0]), 1 < c.length && f.setAttribute(`${c[1][0]}`, `${c[1][1]}`), a instanceof HTMLElement) a.appendChild(f); else if ("pass" == a) { var g = document.getElementById("button").parentNode; g.appendChild(f) } else document.getElementById(a).appendChild(f); return f }, Ourpass.prototype.removeElement = function (a) { a instanceof HTMLElement || (a = document.getElementById(a)), a && a.parentNode && a.parentNode.removeChild(a) }, Ourpass.prototype.openIframe = function (a) { let b = document.getElementById("ourpassParentModal"); switch (!b || b.remove(), this.clientInfo = a, a.env) { case "sandbox": this.config = this.environments.sandbox; break; default: this.config = this.environments.production; }b = this.createAnElement(document.getElementsByTagName("body")[0], "div", ["ourpassParentModal"], this.dStyle.ourpassParentModal); const c = this.createAnElement("ourpassParentModal", "div", ["ourPassContentModal"]), d = this.createAnElement("ourPassContentModal", "span", ["ourpassCloseButton", ["onclick", "OurpassCheckout.g()"]], this.dStyle.ourpassCloseButton, "&times;"); this.handleAnimation(), this.isMobileDevice ? (c.style.cssText = this.dStyle.ourPassContentModalMobile, d.style.display = "none") : (this.dStyle.ourpassIframe = `${this.dStyle.ourpassIframe}border-radius: 10px;`, c.style.cssText = this.dStyle.ourPassContentModalDesktop); var e = this.createAnElement("ourPassContentModal", "iframe", ["dFrame", ["src", this.generateIframeSrc()]], this.dStyle.ourpassIframe); e.addEventListener("load", this.handleIframeLoaded, !0), window.addEventListener("message", c => { this.config.baseUrl === c.origin && ("false pass" == c.data && (this.removeElement(b), this.clientInfo.onClose()), "false pass1" == c.data && (this.removeElement(b), this.clientInfo.onSuccess(a))) }) }, window.OurpassCheckout = new Ourpass;